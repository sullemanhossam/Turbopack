{"code":"import * as tslib_1 from \"tslib\";\r\nimport Vue from 'vue';\r\nimport poserFactory from 'popmotion-pose';\r\nimport PoserMap from '../utils/poser-map';\r\nvar setPoserTo = function (fromPose, toPose, defaultConfig, that) { return function (el, done) {\r\n    if (!PoserMap.has(el)) {\r\n        PoserMap.set(el, poserFactory(el, tslib_1.__assign({}, defaultConfig, { initialPose: fromPose })));\r\n    }\r\n    PoserMap.get(el)\r\n        .set(toPose)\r\n        .then(function () {\r\n        that.$emit('poseComplete', toPose);\r\n        done();\r\n    });\r\n}; };\r\nvar initPoser = function (setPrePose, initialPose) { return function () { return setPrePose(initialPose); }; };\r\nvar PoseTransition = Vue.extend({\r\n    props: {\r\n        enterPose: {\r\n            type: String,\r\n            default: 'enter'\r\n        },\r\n        exitPose: {\r\n            type: String,\r\n            default: 'exit'\r\n        }\r\n    },\r\n    provide: function () {\r\n        var parent = this;\r\n        return {\r\n            _poseGetInitialPoseFromParent: function () {\r\n                return parent.prePose;\r\n            },\r\n            _poseDestroyOnUnmount: false\r\n        };\r\n    },\r\n    created: function () {\r\n        var _this = this;\r\n        var _a;\r\n        var _b = this.$props, enterPose = _b.enterPose, exitPose = _b.exitPose;\r\n        var appear = this.$attrs.appear;\r\n        var defaultConfig = (_a = {},\r\n            _a[enterPose] = { opacity: 1 },\r\n            _a[exitPose] = { opacity: 0 },\r\n            _a);\r\n        var setPrePose = function (pose) { return (_this.prePose = pose); };\r\n        this.on = {\r\n            beforeEnter: initPoser(setPrePose, exitPose),\r\n            beforeLeave: initPoser(setPrePose, enterPose),\r\n            enter: setPoserTo(exitPose, enterPose, defaultConfig, this),\r\n            leave: setPoserTo(enterPose, exitPose, defaultConfig, this)\r\n        };\r\n        if (appear !== undefined) {\r\n            this.on.appear = setPoserTo(exitPose, enterPose, defaultConfig, this);\r\n            this.on.beforeAppear = initPoser(setPrePose, exitPose);\r\n        }\r\n    },\r\n    render: function (createElement) {\r\n        return createElement('transition', {\r\n            props: tslib_1.__assign({ css: false }, this.$attrs),\r\n            on: this.on\r\n        }, [this.$slots.default]);\r\n    }\r\n});\r\nexport default PoseTransition;\r\n//# sourceMappingURL=pose-transition.js.map","map":"{\"version\":3,\"file\":\"pose-transition.js\",\"sourceRoot\":\"\",\"sources\":[\"../src/components/pose-transition.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,GAAG,MAAM,KAAK,CAAC;AACtB,OAAO,YAAY,MAAM,gBAAgB,CAAC;AAC1C,OAAO,QAAQ,MAAM,oBAAoB,CAAC;AAQ1C,IAAM,UAAU,GAAG,UACjB,QAAgB,EAChB,MAAc,EACd,aAAqB,EACrB,IAAS,IACa,OAAA,UAAC,EAAE,EAAE,IAAI;IAC/B,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;QACrB,QAAQ,CAAC,GAAG,CACV,EAAE,EACF,YAAY,CAAC,EAAE,uBAAO,aAAa,IAAE,WAAW,EAAE,QAAQ,IAAG,CAC9D,CAAC;KACH;IAED,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;SACb,GAAG,CAAC,MAAM,CAAC;SACX,IAAI,CAAC;QACJ,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;QACnC,IAAI,EAAE,CAAC;IACT,CAAC,CAAC,CAAC;AACP,CAAC,EAduB,CAcvB,CAAC;AAEF,IAAM,SAAS,GAAG,UAChB,UAAkC,EAClC,WAAmB,IAChB,OAAA,cAAM,OAAA,UAAU,CAAC,WAAW,CAAC,EAAvB,CAAuB,EAA7B,CAA6B,CAAC;AAEnC,IAAM,cAAc,GAAmB,GAAG,CAAC,MAAM,CAAC;IAChD,KAAK,EAAE;QACL,SAAS,EAAE;YACT,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,OAAO;SACjB;QACD,QAAQ,EAAE;YACR,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,MAAM;SAChB;KACF;IACD,OAAO;QACL,IAAM,MAAM,GAAG,IAAI,CAAC;QAEpB,OAAO;YACL,6BAA6B;gBAC3B,OAAO,MAAM,CAAC,OAAO,CAAC;YACxB,CAAC;YACD,qBAAqB,EAAE,KAAK;SAC7B,CAAC;IACJ,CAAC;IACD,OAAO;QAAP,iBAsBC;;QArBO,IAAA,gBAAqC,EAAnC,wBAAS,EAAE,sBAAQ,CAAiB;QACpC,IAAA,2BAAM,CAAiB;QAE/B,IAAM,aAAa;YACjB,GAAC,SAAS,IAAG,EAAE,OAAO,EAAE,CAAC,EAAE;YAC3B,GAAC,QAAQ,IAAG,EAAE,OAAO,EAAE,CAAC,EAAE;eAC3B,CAAC;QAEF,IAAM,UAAU,GAAG,UAAC,IAAY,IAAK,OAAA,CAAC,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC,EAArB,CAAqB,CAAC;QAE3D,IAAI,CAAC,EAAE,GAAG;YACR,WAAW,EAAE,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC;YAC5C,WAAW,EAAE,SAAS,CAAC,UAAU,EAAE,SAAS,CAAC;YAC7C,KAAK,EAAE,UAAU,CAAC,QAAQ,EAAE,SAAS,EAAE,aAAa,EAAE,IAAI,CAAC;YAC3D,KAAK,EAAE,UAAU,CAAC,SAAS,EAAE,QAAQ,EAAE,aAAa,EAAE,IAAI,CAAC;SAC5D,CAAC;QAEF,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,IAAI,CAAC,EAAE,CAAC,MAAM,GAAG,UAAU,CAAC,QAAQ,EAAE,SAAS,EAAE,aAAa,EAAE,IAAI,CAAC,CAAC;YACtE,IAAI,CAAC,EAAE,CAAC,YAAY,GAAG,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;SACxD;IACH,CAAC;IACD,MAAM,YAAC,aAAa;QAClB,OAAO,aAAa,CAClB,YAAY,EACZ;YACE,KAAK,qBAAI,GAAG,EAAE,KAAK,IAAK,IAAI,CAAC,MAAM,CAAE;YACrC,EAAE,EAAE,IAAI,CAAC,EAAE;SACZ,EACD,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CACtB,CAAC;IACJ,CAAC;CACF,CAAC,CAAC;AAEH,eAAe,cAAc,CAAC\"}","dts":{"name":"/Users/mattperry/Sites/popmotion/packages/vue-pose/components/pose-transition.d.ts","text":"import { PosedComponent } from '../types';\r\ndeclare const PoseTransition: PosedComponent;\r\nexport default PoseTransition;\r\n"}}
